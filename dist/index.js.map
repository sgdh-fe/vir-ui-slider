{"version":3,"file":"index.js","sources":["../src/pagination.js","../src/index.js"],"sourcesContent":["import Vir from 'vir'\nimport $ from 'jquery'\n\nexport default function (options) {\n  const App = Vir()\n  const ctx = this\n\n  let {\n    selector,\n    navSelector = 'li',\n    currentClass = 'cur'\n  } = options\n\n\n\n  const app = new App({\n    data: {\n      lock: false,\n      index: 0\n    },\n    el: selector,\n    events: {\n      ['mouseenter->' + navSelector]: 'enter',\n      ['mouseleave->' + navSelector]: 'leave'\n    },\n    watch: {\n      index(result) {\n        let old = result.old\n        let index = result.value\n        this.$$(navSelector).eq(old).removeClass(currentClass)\n        this.$$(navSelector).eq(index).addClass(currentClass)\n      }\n    },\n    methods: {\n      enter(event) {\n        let $el = $(event.currentTarget)\n        let index = $el.attr('data-index') || $el.index()\n        this.set('t', setTimeout(() => {\n          ctx.set('index', index)\n          this.set('index', index)\n        }, 200))\n      },\n      leave() {\n        clearTimeout(this.get('t'))\n      }\n    }\n  })\n\n  // 双向\n  ctx.$watch('index', (result) => {\n    app.set('index', result.value)\n  })\n\n}","import Vir from 'vir'\nimport initPagination from './pagination'\n\nexport default function (options = {}) {\n  let {\n    lazyload = false,\n      wrapperSelector = 'ul',\n      slideSelector = 'ul > li',\n      nextSelector = '.next',\n      prevSelector = '.prev',\n      pagination = {}\n  } = options\n\n  return Vir({\n    data: {\n      index: 0,\n      lock: false,\n      state: {}\n    },\n    events: {\n      ['click->' + nextSelector]: 'next',\n      ['click->' + prevSelector]: 'prev'\n    },\n    validate: {\n      index() {\n        if (this.get('lock')) {\n          return false\n        }\n      }\n    },\n    watch: {\n      index(result) {\n        let index = result.value\n        this.set('lock', true)\n        if (lazyload) {\n          this.lazyload(index)\n        }\n        this.$$(wrapperSelector).animate({\n          left: index * -100 + '%'\n        }, 500, () => {\n          this.set('lock', false)\n        })\n      }\n    },\n    methods: {\n      index(index) {\n        let len = this.get('len')\n        return index < 0 ? len - 1 : index % len\n      },\n      run(index) {\n        this.set('index', this.index(index))\n      },\n      prev() {\n        this.run(this.get('index') - 1)\n      },\n      next() {\n        this.run(this.get('index') + 1)\n      },\n      getState(index) {\n        let state = this.get('state')\n        if (state[index]) {\n          return true\n        }\n        state[index] = true\n        this.set('state', state)\n      },\n      lazyload(index) {\n        if (this.getState(index)) {\n          return\n        }\n        let $el = this.$$(slideSelector).eq(index).find('img[data-src]')\n        $el.attr('src', $el.attr('data-src'))\n      }\n    },\n    init() {\n      let len = this.$$(slideSelector).length\n      this.set('len', len / 1)\n      this.$$(wrapperSelector).css('width', 100 * len / 1 + '%')\n      this.$$(slideSelector).css('width', 100 / len + '%')\n\n      if (pagination.selector) {\n        initPagination.call(this, pagination)\n      }\n    }\n  })\n}"],"names":["options","App","Vir","ctx","selector","navSelector","currentClass","app","result","old","index","value","$$","eq","removeClass","addClass","event","$el","$","currentTarget","attr","set","setTimeout","get","$watch","lazyload","wrapperSelector","slideSelector","nextSelector","prevSelector","pagination","animate","len","run","state","getState","find","length","css","call"],"mappings":"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"}